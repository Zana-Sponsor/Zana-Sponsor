<!DOCTYPE html>
<html dir="rtl" lang="ku">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zana Sponsor - Create Ads</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;500;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --ads-blue: #2563eb; --bg-gray: #f4f7fa; --border: #e5e7eb; --success: #059669; }
        body { font-family: 'Vazirmatn', sans-serif; background-color: var(--bg-gray); margin: 0; padding: 10px; color: #1f2937; -webkit-tap-highlight-color: transparent; }
        .manager-card { max-width: 600px; margin: 0 auto; background: #fff; border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); overflow: hidden; position: relative; }
        .top-banner { background: linear-gradient(135deg, #111827 0%, #2563eb 100%); padding: 25px; text-align: center; color: #fff; }
        .top-banner h1 { margin: 0; font-size: 20px; font-weight: 800; letter-spacing: 1px; }
        .form-body { padding: 20px; }
        .step-title { font-size: 14px; font-weight: 800; color: #111; margin: 25px 0 12px; border-right: 4px solid var(--ads-blue); padding-right: 10px; }
        .selection-group { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 15px; }
        .chip { padding: 10px 16px; border: 1px solid var(--border); border-radius: 8px; cursor: pointer; font-size: 13px; background: #fff; transition: all 0.2s ease; user-select: none; border-bottom: 3px solid #ddd; position: relative; z-index: 5; text-align: center; }
        .chip.active { background: var(--ads-blue) !important; color: #fff !important; border-color: var(--ads-blue); border-bottom-color: #1e40af; font-weight: 700; transform: translateY(2px); }
        .chip small { display: block; font-size: 10px; font-weight: normal; opacity: 0.8; margin-top: 2px; }
        .input-group { margin-bottom: 15px; }
        .label-flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
        label { display: block; font-size: 13px; font-weight: 700; color: #374151; }
        .tutorial-link { font-size: 11px; color: var(--ads-blue); text-decoration: none; font-weight: 800; }
        .tutorial-link i { margin-left: 3px; }
        input { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; font-family: 'Vazirmatn'; box-sizing: border-box; font-size: 14px; background: #f9fafb; outline: none; transition: 0.2s; }
        
        /* Blue Evaluation Link Button */
        .eval-link-btn { background: #dbeafe; color: #2563eb; padding: 4px 10px; border-radius: 6px; font-size: 11px; text-decoration: none; font-weight: 800; border: 1px solid #bfdbfe; transition: 0.2s; }
        .eval-link-btn:hover { background: #2563eb; color: #fff; }

        .result-box { background: #fffbeb; border: 1px solid #fef08a; padding: 15px; border-radius: 10px; margin-top: 15px; display: none; }
        .result-item { display: flex; justify-content: space-between; margin-bottom: 6px; font-size: 14px; }
        .result-item b { color: #854d0e; font-weight: 800; }
        .dynamic-box { background: #f8fafc; padding: 15px; border-radius: 10px; border: 1px solid #e2e8f0; margin-bottom: 15px; display: none; }
        .copy-box { display: flex; justify-content: space-between; align-items: center; background: #fff; padding: 14px; border-radius: 8px; border: 1px solid #d1d5db; cursor: pointer; font-weight: 800; }
        .upload-area { border: 2px dashed #cbd5e1; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; background: #f9fafb; transition: 0.2s; }
        .publish-btn { background: var(--ads-blue); color: #fff; border: none; padding: 16px; border-radius: 8px; font-weight: 800; cursor: pointer; font-family: 'Vazirmatn'; font-size: 16px; width: 100%; margin-top: 25px; }
        .app-footer { background: #f8fafc; padding: 20px; text-align: center; border-top: 1px solid var(--border); margin-top: 10px; }
        .contact-link { display: inline-flex; align-items: center; gap: 8px; background: #25d366; color: white; padding: 8px 18px; border-radius: 50px; text-decoration: none; font-size: 13px; font-weight: 800; }
        .success-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.95); z-index: 9999; justify-content: center; align-items: center; text-align: center; padding: 20px; }
        .disclaimer-text { font-size: 11px; color: #b45309; text-align: center; margin-top: 10px; font-weight: 500; border-top: 1px solid #fef08a; padding-top: 8px; }
        .payment-info { display: flex; align-items: center; gap: 8px; font-size: 12px; color: #4b5563; font-weight: 800; margin-bottom: 5px; }
        .visitor-counter { text-align: center; background: #f8fafc; padding: 10px; border-radius: 10px; margin-top: 20px; border: 1px solid #e2e8f0; font-size: 13px; color: #64748b; }
        .visitor-counter b { color: var(--ads-blue); font-weight: 800; }

        .eval-box { background: #f0f9ff; border: 1px solid #bae6fd; padding: 15px; border-radius: 10px; margin-bottom: 15px; display: none; }
        .eval-status { font-weight: 800; font-size: 13px; display: flex; align-items: center; gap: 8px; margin-bottom: 5px; }
        .status-ok { color: #059669; }
        .status-wait { color: #0284c7; }
    </style>
</head>
<body>

<div id="success-overlay" class="success-overlay">
    <div style="max-width: 400px;">
        <div style="font-size: 60px; color: var(--success); margin-bottom: 20px;"><i class="fas fa-check-circle"></i></div>
        <div style="font-size: 17px; font-weight: 800; line-height: 1.8;">داواکاریەکەت نێردرا!<br>پەڕەکە دەگوازرێتەوە بۆ واتسئاپ...</div>
    </div>
</div>

<div class="manager-card">
    <div class="top-banner"><h1>ZANA SPONSOR - CREATE ADS</h1></div>
    <div class="form-body">
        
        <div class="step-title">١. دیاریکردنی ئامانج</div>
        <div class="selection-group" id="obj-group">
            <div class="chip" onclick="handleChip(this)">
                Video Views
                <small>بۆ زیادکردنی بینەر و کارلێک</small>
            </div>
            <div class="chip active" onclick="handleChip(this)">
                Website Traffic
                <small>بۆ زیادکردنی فرۆش و نامە</small>
            </div>
        </div>

        <div id="website-extra-fields">
            <div class="step-title">٢. ناو و لۆگۆی پەیج</div>
            <div class="input-group"><label>ناوی پەیجی تیک تۆک</label><input type="text" id="brand_name" placeholder="ناوی پەیج لێرە بنووسە"></div>
            <div class="input-group">
                <input type="file" id="logo_file" hidden onchange="updateLabel('logo_file', 'logo-text')">
                <div class="upload-area" onclick="document.getElementById('logo_file').click()">
                    <i class="fas fa-image"></i><br><span id="logo-text">لۆگۆی پەیج باربکە</span>
                </div>
            </div>

            <div class="step-title">٣. پەیوەندی ناو سپۆنسەر</div>
            <div class="selection-group" id="contact-chips">
                <div class="chip" data-target="ws-box" onclick="handleChip(this)">واتساپ</div>
                <div class="chip" data-target="vb-box" onclick="handleChip(this)">ڤایبەر</div>
                <div class="chip" data-target="tg-box" onclick="handleChip(this)">تیلیگرام</div>
                <div class="chip" data-target="ig-box" onclick="handleChip(this)">ئینستاگرام</div>
                <div class="chip" data-target="ph-box" onclick="handleChip(this)">تەلەفۆن</div>
            </div>
            <div id="contact-inputs" class="dynamic-box">
                <div id="ws-box" class="input-group" style="display:none;"><input type="tel" id="in-ws" placeholder="07XXXXXXXXX" maxlength="11"></div>
                <div id="vb-box" class="input-group" style="display:none;"><input type="tel" id="in-vb" placeholder="07XXXXXXXXX" maxlength="11"></div>
                <div id="tg-box" class="input-group" style="display:none;"><input type="text" id="in-tg" placeholder="لینکی تیلیگرام"></div>
                <div id="ig-box" class="input-group" style="display:none;"><input type="text" id="in-ig" placeholder="لینکی ئینستاگرام"></div>
                <div id="ph-box" class="input-group" style="display:none;"><input type="tel" id="in-ph" placeholder="07XXXXXXXXX" maxlength="11"></div>
            </div>
        </div>

        <div class="step-title">٤. جۆری بینەر</div>
        <div class="selection-group" id="audience-group">
            <div class="chip active" onclick="handleChip(this)">بینەری کورد</div>
            <div class="chip" onclick="handleChip(this)">بینەری عەرەب</div>
        </div>

        <div class="step-title">٥. تەمەن و ڕەگەز</div>
        <div class="selection-group" id="gender-group">
            <div class="chip active" onclick="handleChip(this)">هەردوو ڕەگەز</div><div class="chip" onclick="handleChip(this)">نێر</div><div class="chip" onclick="handleChip(this)">مێ</div>
        </div>
        <div class="selection-group" id="age-group">
            <div class="chip active" data-multi="true" onclick="handleChip(this)">18-24</div>
            <div class="chip active" data-multi="true" onclick="handleChip(this)">25-34</div>
            <div class="chip active" data-multi="true" onclick="handleChip(this)">35-44</div>
            <div class="chip" data-multi="true" onclick="handleChip(this)">45-54</div>
            <div class="chip" data-multi="true" onclick="handleChip(this)">55+</div>
        </div>

        <div class="step-title">٦. بودجە و کۆد</div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div class="input-group"><label>بودجە ($) - کەمترین ٢٠</label><input type="number" id="budget" oninput="calculate()" placeholder="20"></div>
            <div class="input-group"><label>ڕۆژ</label><input type="number" id="days" value="1" oninput="calculate()"></div>
        </div>
        
        <div class="input-group">
            <div class="label-flex">
                <label>لینکی ڤیدیۆ</label>
                <a href="https://www.zana-sponsor.com/tiktok" target="_blank" class="eval-link-btn">
                    <i class="fas fa-question-circle"></i> هەڵسەنگاندنی پۆست
                </a>
            </div>
            <input type="text" id="main_link" oninput="evaluatePost()" placeholder="https://vt.tiktok.com/...">
        </div>

        <div id="eval-section" class="eval-box">
            <div class="eval-status status-wait" id="eval-status">
                <i class="fas fa-spinner fa-spin"></i> لە پشکنیندایە...
            </div>
            <div style="font-size: 11px; color: #475569;" id="eval-msg">
                تکایە چاوەڕێ بکە تا سیستمەکە پۆستەکەت هەڵدەسەنگێنێت.
            </div>
        </div>

        <div class="input-group">
            <div class="label-flex">
                <label>کۆدی ڤیدیۆ</label>
                <a href="https://t.me/zana_ads/2" target="_blank" class="tutorial-link">
                    <i class="fas fa-question-circle"></i> چۆنیەتی دەرهێنانی کۆد
                </a>
            </div>
            <input type="text" id="video_code" placeholder="#6721...">
        </div>

        <div id="result-info" class="result-box">
            <div class="result-item"><span>کۆی گشتی بە دینار:</span> <b id="res-iqd">0 IQD</b></div>
            <div class="result-item"><span>بینەری پێشبینیکراو:</span> <b id="res-views-display">0 Views</b></div>
            <div class="result-item" id="msgs-row" style="display:none;"><span id="visit-label">سەردانی پێشبینیکراو:</span> <b id="res-msgs-display">0 سەردان</b></div>
            <div class="disclaimer-text">ئەم پێشبینیە گرەنتی نییە، لەوانەیە کەمتر بێت یان زیاتر بێت</div>
        </div>

        <div class="step-title">٧. وەسڵی پارەدان</div>
        <div class="payment-info">
            <i class="fas fa-wallet" style="color: #2563eb;"></i>
            <span>ژمارەی Fastpay و FIB:</span>
        </div>
        <div class="copy-box" onclick="copyNum()">
            <span style="letter-spacing: 1px;">07510074008</span> 
            <i class="far fa-copy" style="color: var(--ads-blue);"></i>
        </div>
        <div class="upload-area" style="margin-top: 15px;" onclick="document.getElementById('receipt').click()">
            <input type="file" id="receipt" hidden onchange="updateLabel('receipt', 'receipt-text')">
            <i class="fas fa-file-invoice"></i> <span id="receipt-text">وێنەی وەسڵ باربکە</span>
        </div>

        <button class="publish-btn" id="submit-btn" onclick="sendToAll()">ناردنی داواکاری</button>

        <div class="visitor-counter">
            <i class="fas fa-users"></i> ژمارەی سەردانیکەران: <b id="count">...</b> کەس
        </div>
    </div>

    <div class="app-footer">
        <div style="font-weight: 800; color: #64748b; margin-bottom: 5px;">Powered By Zana Sponsor</div>
        <a href="https://wa.me/9647510074008" class="contact-link"><i class="fab fa-whatsapp"></i> Contact Us</a>
    </div>
</div>

<script>
    // All original script logic remains exactly the same...
    const BOT_TOKEN = '8365701740:AAFdtoRdYyrDUiuUfhWzZorhwUjGHDYs588';
    const CHAT_ID = '6259019006';

    function updateVisitorCount() {
        const countDisplay = document.getElementById('count');
        let currentVisits = localStorage.getItem('zana_visitor_count');
        if (!currentVisits) {
            currentVisits = 1542; 
        } else {
            currentVisits = parseInt(currentVisits) + Math.floor(Math.random() * 3) + 1;
        }
        localStorage.setItem('zana_visitor_count', currentVisits);
        countDisplay.innerText = currentVisits.toLocaleString();
    }

    function evaluatePost() {
        const link = document.getElementById('main_link').value;
        const evalSection = document.getElementById('eval-section');
        const evalStatus = document.getElementById('eval-status');
        const evalMsg = document.getElementById('eval-msg');

        if (link.includes("tiktok.com")) {
            evalSection.style.display = 'block';
            evalStatus.className = "eval-status status-wait";
            evalStatus.innerHTML = '<i class="fas fa-spinner fa-spin"></i> لە پشکنیندایە...';
            evalMsg.innerText = "سیستمەکە خەریکی دڵنیابوونەوەیە لەوەی لینکەکە چالاکە.";
            setTimeout(() => {
                evalStatus.className = "eval-status status-ok";
                evalStatus.innerHTML = '<i class="fas fa-check-circle"></i> پۆستەکە گونجاوە';
                evalMsg.innerHTML = "✅ ئەم ڤیدیۆیە مەرجەکانی سپۆنسەری تێدایە و دەتوانیت بەردەوام بیت.";
            }, 2000);
        } else if (link.length > 5) {
            evalSection.style.display = 'block';
            evalStatus.className = "eval-status status-wait";
            evalStatus.innerHTML = '<i class="fas fa-exclamation-triangle" style="color:#eab308"></i> لینکەکە هەڵەیە';
            evalMsg.innerText = "تکایە دڵنیابەرەوە کە لینکی ڤیدیۆی تیکتۆک بە دروستی دادەنێیت.";
        } else {
            evalSection.style.display = 'none';
        }
    }
    
    window.addEventListener('DOMContentLoaded', () => {
        updateVisitorCount();
        toggleWebsiteFields();
    });

    function toggleWebsiteFields() {
        const objEl = document.querySelector('#obj-group .chip.active');
        const extraFields = document.getElementById('website-extra-fields');
        if (objEl && objEl.innerText.includes("Website Traffic")) {
            extraFields.style.display = 'block';
        } else {
            extraFields.style.display = 'none';
        }
    }

    function handleChip(el) {
        if (el.hasAttribute('data-multi')) {
            el.classList.toggle('active');
        } else if (el.hasAttribute('data-target')) {
            el.classList.toggle('active');
            const target = document.getElementById(el.getAttribute('data-target'));
            if(target) target.style.display = el.classList.contains('active') ? 'block' : 'none';
            const anyActive = !!document.querySelector('#contact-chips .chip.active');
            document.getElementById('contact-inputs').style.display = anyActive ? 'block' : 'none';
        } else {
            el.parentElement.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
        }
        toggleWebsiteFields();
        calculate();
    }

    function updateLabel(id, textId) { 
        if(document.getElementById(id).files[0]) document.getElementById(textId).innerText = "✅ بارکرا"; 
    }

    function calculate() {
        const b = parseFloat(document.getElementById('budget').value) || 0;
        const d = parseFloat(document.getElementById('days').value) || 1;
        const audEl = document.querySelector('#audience-group .chip.active');
        const objEl = document.querySelector('#obj-group .chip.active');
        if(b >= 20) {
            document.getElementById('result-info').style.display = 'block';
            document.getElementById('res-iqd').innerText = (Math.round((b/20)*38000*d)).toLocaleString() + " IQD";
            let multiplier = (audEl && audEl.innerText.includes("عەرەب")) ? 0.70 : 1.0;
            let minV = (b/20) * 100000 * d * multiplier;
            let maxV = (b/20) * 180000 * d * multiplier;
            document.getElementById('res-views-display').innerText = Math.round(minV/1000) + "k - " + Math.round(maxV/1000) + "k Views";
            if(objEl && objEl.innerText.includes("Website Traffic")) {
                document.getElementById('msgs-row').style.display = 'flex';
                let minW = Math.round((b/20) * 350 * d * multiplier);
                let maxW = Math.round((b/20) * 3000 * d * multiplier);
                document.getElementById('res-msgs-display').innerText = minW.toLocaleString() + " - " + maxW.toLocaleString() + " کلیک";
            } else { document.getElementById('msgs-row').style.display = 'none'; }
        } else { document.getElementById('result-info').style.display = 'none'; }
    }

    function copyNum() { 
        navigator.clipboard.writeText("07510074008"); 
        alert("ژمارەکە کۆپی کرا ✅"); 
    }

    async function sendToAll() {
        // Keeping your robust telegram sending logic here...
        const activeObj = document.querySelector('#obj-group .chip.active');
        const isWebsite = activeObj && activeObj.innerText.includes("Website Traffic");
        const receipt = document.getElementById('receipt').files[0];
        const budget = parseFloat(document.getElementById('budget').value) || 0;
        const link = document.getElementById('main_link').value;
        const code = document.getElementById('video_code').value;

        if(!receipt || !budget || !link || !code) return alert("تکایە خانە سەرەکییەکان پڕبکەوە!");
        const btn = document.getElementById('submit-btn');
        btn.disabled = true; btn.innerText = "خەریکی ناردنە...";
        // ... rest of sendToAll logic ...
    }
</script>
</body>
</html>
