<!DOCTYPE html>
<html dir="rtl" lang="ku">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROXO - فیدباک بنێرە</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-hover: #1d4ed8;
            --bg-gradient: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        body { 
            font-family: 'Vazirmatn', sans-serif; 
            background: var(--bg-gradient); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
        }

        .form-container { 
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 40px; 
            border-radius: 24px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.1); 
            width: 90%; 
            max-width: 420px; 
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .logo { 
            color: var(--primary); 
            font-weight: 900; 
            font-size: 32px; 
            margin-bottom: 10px; 
            text-decoration: none; 
            display: block;
        }

        h2 { color: #1e293b; font-weight: 700; margin-bottom: 25px; font-size: 22px; }

        .input-group { text-align: right; margin-bottom: 20px; }
        
        label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: 700; 
            font-size: 14px; 
            color: #64748b; 
        }

        input, textarea { 
            width: 100%; 
            padding: 14px; 
            border: 2px solid #e2e8f0; 
            border-radius: 12px; 
            outline: none; 
            font-family: 'Vazirmatn'; 
            text-align: right; 
            font-size: 15px; 
            box-sizing: border-box;
            background: white;
            transition: 0.3s;
        }

        input:focus, textarea:focus { 
            border-color: var(--primary); 
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); 
        }

        .btn-send { 
            background: var(--primary); 
            color: white; 
            border: none; 
            padding: 16px; 
            width: 100%; 
            border-radius: 12px; 
            font-weight: 900; 
            cursor: pointer; 
            transition: 0.3s; 
            font-size: 16px;
        }

        .btn-send:hover { 
            background: var(--primary-hover); 
            transform: translateY(-2px);
        }

        #msg { 
            margin-top: 20px; 
            padding: 12px;
            border-radius: 10px;
            font-weight: 700; 
            display: none; 
            font-size: 14px; 
        }

        .back-link {
            display: inline-block;
            margin-top: 25px;
            color: #94a3b8;
            text-decoration: none;
            font-size: 14px;
        }
    </style>
</head>
<body>

<div class="form-container">
    <a href="index.html" class="logo">PROXO</a>
    <h2>بەشداری ئەزموونت بکە</h2>
    
    <form id="fbForm">
        <div class="input-group">
            <label>ناو</label>
            <input type="text" id="custName" placeholder="ناوی تەواوت بنووسە" required>
        </div>

        <div class="input-group">
            <label>پەیام</label>
            <textarea id="custMsg" rows="4" placeholder="ڕای خۆت بنووسە..." required></textarea>
        </div>

        <button type="submit" class="btn-send" id="submitBtn">ناردنی فیدباک</button>
    </form>
    
    <div id="msg"></div>
    
    <a href="index.html" class="back-link">← گەڕانەوە بۆ لاپەڕەی سەرەکی</a>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // تکایە دەستکاری ئەم بەشە مەکە چونکە کلیلەکە لێرەدایە
    const SB_URL = 'https://rtbsblgaewmfiynhwgkv.supabase.co';
    const SB_KEY = 'EyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ0YnNibGdhZXdtZml5bmh3Z2t2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzODIwNDcsImV4cCI6MjA4Njk1ODA0N30.-aEC48G8Hltu6N8y2nPhAYPdB-4PSsR78OSXSLMAGcU';
    
    const _supabase = supabase.createClient(SB_URL, SB_KEY);

    document.getElementById('fbForm').onsubmit = async (e) => {
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        const msgBox = document.getElementById('msg');
        
        btn.disabled = true;
        btn.innerText = 'تکایە چاوەڕوانبە...';

        const n = document.getElementById('custName').value;
        const c = document.getElementById('custMsg').value;

        const { error } = await _supabase
            .from('feedback')
            .insert([{ name: n, comment: c, is_approved: false }]);

        msgBox.style.display = "block";
        if (error) {
            msgBox.innerText = "هەڵە: " + error.message;
            msgBox.style.background = "#fee2e2";
            msgBox.style.color = "#ef4444";
        } else {
            msgBox.innerText = "سوپاس! فیدباکەکەت گەیشت.";
            msgBox.style.background = "#dcfce7";
            msgBox.style.color = "#22c55e";
            document.getElementById('fbForm').reset();
        }
        
        btn.disabled = false;
        btn.innerText = 'ناردنی فیدباک';
    };
</script>
</body>
</html>
