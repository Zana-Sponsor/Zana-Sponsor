<!DOCTYPE html>
<html dir="rtl" lang="ku" class="notranslate" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="google" content="notranslate">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROXO - Feedback</title>

    <style>
        @font-face {
            font-family: 'CustomFont';
            src: url('https://cdn.jsdelivr.net/gh/Zana-Sponsor/Zana-Sponsor@main/new_rudaw_bold.ttf') format('truetype');
            font-weight: normal; font-style: normal; font-display: swap;
        }

        :root { 
            --primary: #2563eb; 
            --primary-hover: #1d4ed8; 
            --main-font: 'CustomFont', 'Vazirmatn', sans-serif;
        }

        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700;900&display=swap');

        * { font-family: var(--main-font); }
        
        body { background: #f1f5f9; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .form-container { background: white; padding: 40px; border-radius: 24px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); width: 90%; max-width: 450px; text-align: center; position: relative; }
        .logo { color: var(--primary); font-weight: 900; font-size: 32px; text-decoration: none; display: block; margin-bottom: 10px; letter-spacing: 1px; }
        
        .lang-switch { margin-bottom: 50px; display: flex; justify-content: center; gap: 10px; }
        .lang-btn { background: #f1f5f9; border: 1px solid #e2e8f0; padding: 6px 18px; border-radius: 50px; cursor: pointer; font-weight: bold; font-size: 13px; transition: 0.3s; color: #64748b; }
        .lang-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        h2 { font-size: 16px; color: #0f172a; margin-bottom: 50px; line-height: 1.4; }

        .input-group { text-align: right; margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 700; font-size: 14px; color: #475569; }
        input, textarea { width: 100%; padding: 15px; border: 2px solid #f1f5f9; border-radius: 12px; outline: none; text-align: right; box-sizing: border-box; background: #f8fafc; transition: 0.3s; font-family: var(--main-font); }
        input:focus, textarea:focus { border-color: var(--primary); background: white; box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); }
        
        .btn-send { background: var(--primary); color: white; border: none; padding: 16px; width: 100%; border-radius: 12px; font-weight: 900; cursor: pointer; font-size: 16px; transition: 0.3s; margin-top: 10px; font-family: var(--main-font); }
        .btn-send:hover { background: var(--primary-hover); transform: translateY(-2px); box-shadow: 0 10px 15px rgba(37, 99, 235, 0.2); }
        .btn-send:disabled { background: #94a3b8; cursor: not-allowed; transform: none; }

        #msg { margin-top: 20px; padding: 15px; border-radius: 12px; display: none; font-weight: bold; font-size: 14px; }
        .back-link { display: inline-block; margin-top: 25px; color: #94a3b8; text-decoration: none; font-size: 14px; transition: 0.3s; }
        .back-link:hover { color: var(--primary); }
    </style>
</head>
<body>

<div class="form-container">
    <a href="index.html" class="logo">PROXO</a>
    
    <div class="lang-switch">
        <button class="lang-btn" id="btn-ku" onclick="setLang('ku')">Ú©ÙˆØ±Ø¯ÛŒ</button>
        <button class="lang-btn" id="btn-en" onclick="setLang('en')">English</button>
        <button class="lang-btn" id="btn-ar" onclick="setLang('ar')">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
    </div>

    <h2 id="title">Ø¦Û•Ø²Ù…ÙˆÙˆÙ†ÛŒ Ø®Û†Øª Ù„Û•Ú¯Û•Úµ Ù¾Ø±Û†Ú©Ø³Û† Ú†Û†Ù† Ø¨ÙˆÙˆØŸ</h2>
    
    <form id="fbForm">
        <div class="input-group">
            <label id="labelName">Ù†Ø§ÙˆÛŒ Ø¨Ø§Ø²Ø±Ú¯Ø§Ù†ÛŒ</label>
            <input type="text" id="custName" placeholder="..." required>
        </div>
        <div class="input-group">
            <label id="labelMsg">ÙÛŒØ¯Ø¨Ø§Ú©</label>
            <textarea id="custMsg" rows="4" placeholder="..." required></textarea>
        </div>
        <button type="submit" class="btn-send" id="submitBtn">Ù†Ø§Ø±Ø¯Ù†ÛŒ ÙÛŒØ¯Ø¨Ø§Ú©</button>
    </form>
    
    <div id="msg"></div>
    <a href="index.html" class="back-link" id="backLink">â† Ú¯Û•Ú•Ø§Ù†Û•ÙˆÛ• Ø¨Û† Ø³Û•Ø±Û•ØªØ§</a>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script class="notranslate">
    const dict = {
        ku: { 
            title: "Ø¦Û•Ø²Ù…ÙˆÙˆÙ†ÛŒ Ø®Û†Øª Ù„Û•Ú¯Û•Úµ Ù¾Ø±Û†Ú©Ø³Û† Ú†Û†Ù† Ø¨ÙˆÙˆØŸ", 
            name: "Ù†Ø§ÙˆÛŒ Ø¨Ø§Ø²Ø±Ú¯Ø§Ù†ÛŒ", 
            namePlc: "Ù†Ø§ÙˆÛŒ Ø¨Ø§Ø²Ø±Ú¯Ø§Ù†ÛŒ ÛŒØ§Ù† Ø¨Ø±Ø§Ù†Ø¯Û•Ú©Û•Øª Ø¨Ù†ÙˆÙˆØ³Û•...", 
            msg: "ÙÛŒØ¯Ø¨Ø§Ú©", 
            msgPlc: "ÙÛŒØ¯Ø¨Ø§Ú©Û•Ú©Û•Øª Ù„ÛØ±Û• Ø¨Ù†ÙˆÙˆØ³Û•...", 
            btn: "Ù†Ø§Ø±Ø¯Ù†ÛŒ ÙÛŒØ¯Ø¨Ø§Ú©", 
            back: "â† Ú¯Û•Ú•Ø§Ù†Û•ÙˆÛ• Ø¨Û† Ø³Û•Ø±Û•ØªØ§", 
            loading: "Ú†Ø§ÙˆÛ•Ú•ÙˆØ§Ù†Ø¨Û•...", 
            success: "Ø³ÙˆÙ¾Ø§Ø³ Ø¨Û† ÙÛŒØ¯Ø¨Ø§Ú©Û•Ú©Û•Øª! Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ Ù†Ø§Ø±Ø¯Ø±Ø§.", 
            error: "Ù‡Û•ÚµÛ•ÛŒÛ•Ú© Ú•ÙˆÙˆÛŒØ¯Ø§" 
        },
        en: { 
            title: "How was your experience with PROXO?", 
            name: "Business Name", 
            namePlc: "Enter your brand or business name...", 
            msg: "Feedback", 
            msgPlc: "Write your feedback here...", 
            btn: "Submit Feedback", 
            back: "â† Back to Home", 
            loading: "Please wait...", 
            success: "Thank you! Feedback sent successfully.", 
            error: "An error occurred" 
        },
        ar: { 
            title: "ÙƒÙŠÙ ÙƒØ§Ù†Øª ØªØ¬Ø±Ø¨ØªÙƒ Ù…Ø¹ Ø¨Ø±ÙˆÙƒØ³ÙˆØŸ", 
            name: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ØªØ¬Ø§Ø±ÙŠ", 
            namePlc: "Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ù†Ø´Ø§Ø·Ùƒ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ...", 
            msg: "Ø±Ø£ÙŠÙƒ", 
            msgPlc: "Ø§ÙƒØªØ¨ Ø±Ø£ÙŠÙƒ Ù‡Ù†Ø§...", 
            btn: "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø£ÙŠ", 
            back: "â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", 
            loading: "ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...", 
            success: "Ø´ÙƒØ±Ø§Ù‹ Ù„Ø±Ø£ÙŠÙƒ! ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­.", 
            error: "Ø­Ø¯Ø« Ø®Ø·Ø£" 
        }
    };

    let currentLang = 'ku';

    function setLang(lang) {
        currentLang = lang;
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(`btn-${lang}`).classList.add('active');
        
        // Ú•ÛÚ©Ø®Ø³ØªÙ†ÛŒ Ø¦Ø§Ø±Ø§Ø³ØªÛ•ÛŒ Ù„Ø§Ù¾Û•Ú•Û• (RTL/LTR)
        document.body.style.direction = (lang === 'en') ? 'ltr' : 'rtl';
        document.querySelectorAll('.input-group').forEach(el => el.style.textAlignment = (lang === 'en') ? 'left' : 'right');
        document.querySelectorAll('input, textarea').forEach(el => el.style.textAlign = (lang === 'en') ? 'left' : 'right');

        document.getElementById('title').innerText = dict[lang].title;
        document.getElementById('labelName').innerText = dict[lang].name;
        document.getElementById('custName').placeholder = dict[lang].namePlc;
        document.getElementById('labelMsg').innerText = dict[lang].msg;
        document.getElementById('custMsg').placeholder = dict[lang].msgPlc;
        document.getElementById('submitBtn').innerText = dict[lang].btn;
        document.getElementById('backLink').innerText = dict[lang].back;
    }

    // Ù†Ø§Ø³ÛŒÙ†Û•ÙˆÛ•ÛŒ Ø²Ù…Ø§Ù† Ù„Û• URL
    window.onload = () => {
        const urlParams = new URLSearchParams(window.location.search);
        const lang = urlParams.get('lang') || 'ku';
        setLang(lang);
    };

    (function() {
        const _0xU = 'https://rtbsblgaewmfiynhwgkv.supabase.co';
        const _0xK = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ0YnNibGdhZXdtZml5bmh3Z2t2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzODIwNDcsImV4cCI6MjA4Njk1ODA0N30.-aEC48G8Hltu6N8y2nPhAYPdB-4PSsR78OSXSLMAGcU';
        
        const supabaseClient = supabase.createClient(_0xU, _0xK);

        const TG_TOKEN = '8430730550:AAGdNRYVpKufZn6WOwDcpMetHlERGQZEQHQ';
        const TG_CHAT_ID = '6259019006';

        document.getElementById('fbForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            const msgBox = document.getElementById('msg');
            
            const name = document.getElementById('custName').value;
            const comment = document.getElementById('custMsg').value;

            btn.disabled = true;
            btn.innerText = dict[currentLang].loading;

            // Ù†Ø§Ø±Ø¯Ù†ÛŒ Ø²Ù…Ø§Ù† (lang) Ø¨Û† Ø¯Ø§ØªØ§Ø¨Û•ÛŒØ³
            const { error } = await supabaseClient
                .from('feedback')
                .insert([{ 
                    name: name, 
                    comment: comment, 
                    lang: currentLang,
                    is_approved: false 
                }]);

            msgBox.style.display = "block";

            if (error) {
                msgBox.innerText = dict[currentLang].error;
                msgBox.style.background = "#fee2e2";
                msgBox.style.color = "#ef4444";
                btn.disabled = false;
                btn.innerText = dict[currentLang].btn;
            } else {
                const now = new Date();
                const dateTimeStr = now.toLocaleString('en-GB', { timeZone: 'Asia/Baghdad' });
                const tgMessage = `ğŸš€ *New Feedback!*\n\nğŸ¢ *Brand:* ${name}\nğŸ’¬ *Message:* ${comment}\nğŸŒ *Lang:* ${currentLang}\n\nğŸ“… *Time:* ${dateTimeStr}`;
                
                try {
                    await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ chat_id: TG_CHAT_ID, text: tgMessage, parse_mode: 'Markdown' })
                    });
                } catch (tgErr) {}

                msgBox.innerText = dict[currentLang].success;
                msgBox.style.background = "#dcfce7";
                msgBox.style.color = "#22c55e";
                
                setTimeout(() => { location.href = 'index.html'; }, 2000);
            }
        };
    })();
</script>
</body>
</html>
