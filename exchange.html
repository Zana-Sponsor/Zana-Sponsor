<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>ZANA EXCHANGE | Global Premium</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;500;800&display=swap');
        :root { --accent: #00d2ff; --bg: #0a0a0c; --card-bg: #16161a; --text: #ffffff; }
        body { font-family: 'Vazirmatn', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; justify-content: center; }
        
        .app-wrapper { width: 100%; max-width: 390px; display: none; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .premium-card { background: var(--card-bg); border-radius: 24px; padding: 20px; margin-bottom: 12px; border: 1px solid rgba(255, 255, 255, 0.05); box-shadow: 0 10px 30px rgba(0,0,0,0.6); }

        /* Login Screen Design */
        #loginSection { width: 100%; max-width: 350px; text-align: center; z-index: 1000; }
        .logo-area { font-size: 50px; color: var(--accent); margin-bottom: 15px; text-shadow: 0 0 20px rgba(0, 210, 255, 0.4); }
        .login-title { font-size: 24px; font-weight: 800; margin-bottom: 5px; letter-spacing: 1px; }
        .login-subtitle { color: #666; font-size: 14px; margin-bottom: 30px; }

        /* Google Button Style */
        .btn-google { 
            background: white; color: #000; width: 100%; padding: 14px; border: none; 
            border-radius: 14px; font-weight: 700; font-size: 15px; cursor: pointer; 
            display: flex; align-items: center; justify-content: center; gap: 12px;
            transition: 0.3s; box-shadow: 0 4px 15px rgba(255,255,255,0.1);
        }
        .btn-google:hover { background: #f1f1f1; transform: translateY(-2px); }
        .btn-google img { width: 20px; }

        .btn-guest { margin-top: 15px; color: #555; font-size: 13px; cursor: pointer; text-decoration: underline; }

        /* App Elements */
        .wallet-compact { background: #1f1f24; border-radius: 12px; padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-right: 3px solid var(--accent); }
        .input-label { font-size: 12px; color: #888; margin-bottom: 6px; display: flex; align-items: center; gap: 6px; }
        select, input { width: 100%; background: #1f1f24; border: 1px solid #2d2d35; border-radius: 10px; padding: 12px; color: white; font-family: 'Vazirmatn'; text-align: center; outline: none; font-size: 14px; margin-bottom: 12px; box-sizing: border-box; }
        
        .btn-global { background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%); color: #000; width: 100%; padding: 16px; border: none; border-radius: 15px; font-weight: 800; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.2s; }
        .btn-global:active { transform: scale(0.96); }
        
        .balance-badge { background: rgba(0, 210, 255, 0.08); color: var(--accent); padding: 12px; border-radius: 12px; text-align: center; margin: 8px 0; border: 1px solid rgba(0, 210, 255, 0.15); }
        #totalDisplay { font-size: 24px; font-weight: 800; }
    </style>
</head>
<body>

<div id="loginSection">
    <div class="logo-area"><i class="fas fa-bolt-lightning"></i></div>
    <div class="login-title">ZANA EXCHANGE</div>
    <div class="login-subtitle">Ø®ÛØ±Ø§ØªØ±ÛŒÙ† Ù¾Ù„Ø§ØªÙÛ†Ø±Ù…ÛŒ Ú¯Û†Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ø¯Ø±Ø§Ùˆ</div>
    
    <button class="btn-google" onclick="signIn()">
        <img src="https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_æ¿€ogo_2015.png" alt="Google">
        Ø¨Û•Ø±Ø¯Û•ÙˆØ§Ù…Ø¨Û• Ù„Û•Ú¯Û•Úµ Google
    </button>
    
    <div class="btn-guest" onclick="enterAsGuest()">ÙˆÛ•Ú© Ù…ÛŒÙˆØ§Ù† Ø³Û•ÛŒØ±ÛŒ Ù†Ø±Ø®Û•Ú©Ø§Ù† Ø¨Ú©Û•</div>
</div>

<div class="app-wrapper" id="mainApp">
    <div style="display:flex; justify-content:space-between; align-items:center; padding: 10px 5px; margin-bottom: 10px;">
        <div style="display:flex; align-items:center; gap:8px;">
            <img id="userImg" src="" style="width:35px; height:35px; border-radius:50%; border: 1.5px solid var(--accent);">
            <b id="userName" style="font-size: 14px;">...</b>
        </div>
        <i class="fas fa-sign-out-alt" onclick="logout()" style="color: #444; font-size: 20px; cursor:pointer;"></i>
    </div>

    <div class="premium-card">
        <div class="wallet-compact">
            <div class="wallet-info">
                <small style="font-size: 10px; color: #666;">Ú˜Ù…Ø§Ø±Û•ÛŒ Ø¦ÛÙ…Û• Ø¨Û† Ù†Ø§Ø±Ø¯Ù†:</small>
                <b id="myNum" style="font-size: 15px; color: var(--accent);">---</b>
            </div>
            <i class="far fa-copy" onclick="copyNum()" style="color: var(--accent); cursor:pointer;"></i>
        </div>

        <span class="input-label"><i class="fas fa-arrow-up"></i> Ù†Ø§Ø±Ø¯Ù† Ù„Û•Ú•ÛÚ¯Û•ÛŒ:</span>
        <select id="from" onchange="updateWallet()">
            <option value="FastPay">ğŸ’³ FastPay</option>
            <option value="FIB">ğŸ¦ FIB Bank</option>
            <option value="Asiacell">ğŸ“± Asiacell Transfer</option>
            <option value="Korek">ğŸ“± Korek Transfer</option>
            <option value="USDT">ğŸª™ USDT (Network Address)</option>
        </select>

        <span class="input-label"><i class="fas fa-coins"></i> Ø¨Ú•ÛŒ Ù†Ø§Ø±Ø¯Ù†:</span>
        <input type="number" id="amt" placeholder="0" oninput="calc()">

        <span class="input-label"><i class="fas fa-wallet"></i> ÙˆÛ•Ø±Ú¯Ø±ØªÙ† Ù„Û•Ø³Û•Ø±:</span>
        <select id="receiveVia" onchange="calc()">
            <option value="FastPay">FastPay</option>
            <option value="FIB">FIB Bank</option>
            <option value="QiCard">Qi Card</option>
        </select>

        <div class="balance-badge">
            <small style="font-size: 11px; display: block; margin-bottom: 2px; opacity: 0.6;">Ø¨Ú•ÛŒ Ù¾ÙˆØ®ØªÛ•ÛŒ ÙˆÛ•Ø±Ú¯ÛŒØ±Ø§Ùˆ:</small>
            <div id="totalDisplay">0 IQD</div>
        </div>

        <span class="input-label"><i class="fas fa-phone"></i> Ú˜Ù…Ø§Ø±Û•ÛŒ Ù…Û†Ø¨Ø§ÛŒÙ„ÛŒ ØªÛ†:</span>
        <input type="tel" id="userPhone" placeholder="07XXXXXXXXX">
        
        <button class="btn-global" id="submitBtn" onclick="processOrder()">
            <i class="fab fa-whatsapp"></i> Ù†Ø§Ø±Ø¯Ù†ÛŒ Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒ
        </button>
    </div>
</div>

<script>
    const firebaseConfig = { apiKey: "AIzaSyB056_g2Y3AJjtjG9715FgtXIhtjFcMPPU", authDomain: "zana-exchange.firebaseapp.com", databaseURL: "https://zana-exchange-default-rtdb.firebaseio.com", projectId: "zana-exchange" };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    let isGuest = false;

    function signIn() { 
        isGuest = false; 
        const provider = new firebase.auth.GoogleAuthProvider();
        auth.signInWithPopup(provider).catch(err => alert("Ù‡Û•ÚµÛ•ÛŒÛ•Ú© Ú•ÙˆÙˆÛŒØ¯Ø§ Ù„Û• Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•"));
    }

    function enterAsGuest() { 
        isGuest = true; 
        document.getElementById('loginSection').style.display = 'none'; 
        document.getElementById('mainApp').style.display = 'block'; 
        document.getElementById('userName').innerText = "Ù…ÛŒÙˆØ§Ù† (ØªÛ•Ù†Ù‡Ø§ Ø¨ÛŒÙ†ÛŒÙ†)";
        document.getElementById('userImg').src = "https://cdn-icons-png.flaticon.com/512/149/149071.png";
        // Ú¯Û†Ú•ÛŒÙ†ÛŒ Ø³ØªØ§ÛŒÙ„ÛŒ Ø¯ÙˆÚ¯Ù…Û•Ú©Û• Ø¨Û† Ø¦Û•ÙˆÛ•ÛŒ Ø¯ÛŒØ§Ø± Ø¨ÛØª Ù†Ø§Ú†Ø§Ù„Ø§Ú©Û•
        document.getElementById('submitBtn').style.opacity = "0.5";
        document.getElementById('submitBtn').innerHTML = "Ø¨Û† Ù†Ø§Ø±Ø¯Ù† Ù¾ÛÙˆÛŒØ³ØªÛ• Ø¯Ø§Ø®Úµ Ø¨ÛŒØª";
    }

    function logout() { auth.signOut().then(() => location.reload()); }

    auth.onAuthStateChanged(user => { 
        if (user && !isGuest) { 
            document.getElementById('loginSection').style.display = 'none'; 
            document.getElementById('mainApp').style.display = 'block'; 
            document.getElementById('userName').innerText = user.displayName; 
            document.getElementById('userImg').src = user.photoURL; 
        } 
    });

    const wallets = { 
        "FastPay": "07510074008", "FIB": "07510074008", 
        "Asiacell": "07758887488", "Korek": "07510074008", 
        "USDT": "TTaNnxWNt2bjgSvpRY7NpvyCHUXDi6wjYc" 
    };

    function updateWallet() { document.getElementById('myNum').innerText = wallets[document.getElementById('from').value]; calc(); }

    function calc() {
        const amt = parseFloat(document.getElementById('amt').value) || 0;
        const from = document.getElementById('from').value;
        const to = document.getElementById('receiveVia').value;
        let final = 0;

        if (from === "Asiacell") {
            if (to === "FastPay") final = (amt / 100000) * 84000;
            else if (to === "FIB") final = (amt / 100000) * 83000;
            else if (to === "QiCard") final = (amt / 100000) * 83500;
        } 
        else if (from === "Korek") {
            if (to === "FastPay") final = (amt / 100000) * 82000;
            else if (to === "FIB") final = (amt / 100000) * 81000;
            else if (to === "QiCard") final = (amt / 100000) * 81500;
        }
        else if (from === "USDT") {
            if (to === "FastPay") final = (amt / 100) * 145000;
            else if (to === "FIB") final = (amt / 100) * 144000;
            else if (to === "QiCard") final = (amt / 100) * 144500;
        }
        else { final = amt * 0.99; }
        document.getElementById('totalDisplay').innerText = Math.floor(final).toLocaleString() + " IQD";
    }

    function processOrder() {
        if(isGuest) {
            alert("âš ï¸ Ø¨Ø¨ÙˆØ±Û•! ÙˆÛ•Ú© Ù…ÛŒÙˆØ§Ù† Ù†Ø§ØªÙˆØ§Ù†ÛŒØª Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒ Ø¨Ù†ÛØ±ÛŒØª. ØªÚ©Ø§ÛŒÛ• Ø¨Û• Ù‡Û•Ú˜Ù…Ø§Ø±ÛŒ Google Ø¯Ø§Ø®Úµ Ø¨Ø¨Û•.");
            return;
        }
        const orderId = Math.floor(1000 + Math.random() * 8999);
        const text = `ğŸ”¹ Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒ Ù†ÙˆÛ: %23${orderId}%0A---%0AğŸ“¥ Ù†Ø§Ø±Ø¯Ù†: ${document.getElementById('from').value}%0AğŸ“¤ ÙˆÛ•Ø±Ú¯Ø±ØªÙ†: ${document.getElementById('receiveVia').value}%0AğŸ’° Ø¨Ú•: ${document.getElementById('amt').value}%0AğŸ’µ Ù¾ÙˆØ®ØªÛ•: ${document.getElementById('totalDisplay').innerText}%0AğŸ“± Ú˜Ù…Ø§Ø±Û•: ${document.getElementById('userPhone').value}`;
        window.open(`https://wa.me/9647510074008?text=${text}`, '_blank');
    }

    function copyNum() { 
        navigator.clipboard.writeText(document.getElementById('myNum').innerText); 
        alert("Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§ âœ…"); 
    }
    updateWallet();
</script>
</body>
</html>
