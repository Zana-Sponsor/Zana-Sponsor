    async function processOrder() {
        const fromVal = document.getElementById('from').value;
        const toVal = document.getElementById('to').value;
        const amtVal = document.getElementById('amt').value;
        const totalVal = document.getElementById('total').innerText;
        const phoneVal = document.getElementById('userPhone').value;
        const imgFile = document.getElementById('imageInput').files[0];
        const btn = document.getElementById('submitBtn');

        if(!amtVal || !phoneVal || !imgFile) return alert("ØªÚ©Ø§ÛŒÛ• Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Ø§Ù† ØªÛ•ÙˆØ§Ùˆ Ø¨Ú©Û•");

        btn.innerText = "Ø®Û•Ø±ÛŒÚ©ÛŒ Ù†Ø§Ø±Ø¯Ù†Û•...";
        btn.disabled = true;

        const dateTime = new Date().toLocaleString('ku-IQ');
        
        // Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù†ÛŒ Ø¯Û•Ù‚Û•Ú©Û• Ø¨Û•Ùˆ Ø´ÛŽÙˆÛ•ÛŒÛ•ÛŒ Ø¯Ø§ÙˆØ§Øª Ú©Ø±Ø¯ÙˆÙˆÛ•
        const amountFormatted = parseInt(amtVal).toLocaleString();
        const mainMessage = `${amountFormatted} Ù„Û• ${fromVal} Ù†ÛŽØ±Ø¯Ø±Ø§ØŒ ${totalVal} Ø¯Û•Ú©Ø§Øª Ù„Û• ${toVal}`;

        const caption = `ðŸ†• Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒ Ù†ÙˆÛŽ\n\nðŸ“ ${mainMessage}\n\nðŸ“± Ú˜Ù…Ø§Ø±Û•ÛŒ ÙˆÛ•Ø±Ú¯Ø±: ${phoneVal}\nðŸ“… Ú©Ø§Øª: ${dateTime}`;

        const formData = new FormData();
        formData.append("chat_id", CHAT_ID);
        formData.append("photo", imgFile);
        formData.append("caption", caption);

        try {
            await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, { method: "POST", body: formData });
            
            saveHistory(fromVal, toVal, amtVal);
            
            // Ù†Ø§Ø±Ø¯Ù†ÛŒ Ù‡Û•Ù…Ø§Ù† ÙˆØ±Ø¯Û•Ú©Ø§Ø±ÛŒ Ø¨Û† ÙˆØ§ØªØ³Ø¦Û•Ù¾ÛŒØ´
            const waText = `Ø³ÚµØ§ÙˆØŒ Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒ Ú¯Û†Ú•ÛŒÙ†Û•ÙˆÛ•Ù… Ù†Ø§Ø±Ø¯ÙˆÙˆÛ•:\n\nâœ… ${mainMessage}\nðŸ“± ÙˆÛ•Ø±Ú¯Ø±: ${phoneVal}`;
            const targetWA = fromVal.includes("QiCard") ? "9647758887488" : "9647510074008";
            
            window.location.href = `https://wa.me/${targetWA}?text=${encodeURIComponent(waText)}`;
            
            setTimeout(() => location.reload(), 2000);
        } catch (err) {
            alert("Ù‡Û•ÚµÛ• Ú•ÙˆÙˆÛŒØ¯Ø§");
            btn.disabled = false;
        }
    }
